{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\esis\\\\Downloads\\\\M6W3D4\\\\frontend\\\\src\\\\pages\\\\EditBlog.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport { Form, Button, Container, Alert, Spinner } from 'react-bootstrap';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditBlog = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const [formData, setFormData] = useState({\n    title: '',\n    content: '',\n    category: '',\n    readTime: {\n      value: 0,\n      unit: 'minuti'\n    },\n    cover: null,\n    author: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const fetchBlog = useCallback(async () => {\n    try {\n      var _blog$author;\n      setLoading(true);\n      const response = await axios.get(`http://localhost:3001/blogs/${id}`);\n      const blog = response.data;\n\n      // Verifica se l'utente è l'autore del blog\n      if (user && blog.author && user._id !== blog.author._id) {\n        setError(\"Non sei autorizzato a modificare questo blog\");\n        setTimeout(() => navigate('/my-blogs'), 2000); // Reindirizza dopo 2 secondi\n        return;\n      }\n      setFormData({\n        title: blog.title || '',\n        content: blog.content || '',\n        category: blog.category || '',\n        readTime: blog.readTime || {\n          value: 1,\n          unit: 'minuti'\n        },\n        cover: null,\n        author: ((_blog$author = blog.author) === null || _blog$author === void 0 ? void 0 : _blog$author._id) || (user === null || user === void 0 ? void 0 : user._id) || ''\n      });\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Errore nel caricamento del blog:', err);\n      setError(`Errore nel caricamento del blog: ${((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  }, [id, user, navigate]);\n  useEffect(() => {\n    if (user) {\n      fetchBlog();\n    } else {\n      setError(\"Devi essere loggato per modificare un blog\");\n      setTimeout(() => navigate('/login'), 2000);\n    }\n  }, [fetchBlog, user, navigate]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      const formDataToSend = new FormData();\n      formDataToSend.append('title', formData.title);\n      formDataToSend.append('content', formData.content);\n      formDataToSend.append('category', formData.category);\n      formDataToSend.append('readTime', JSON.stringify(formData.readTime));\n      if (formData.author) {\n        formDataToSend.append('author', formData.author);\n      }\n      if (formData.cover) {\n        formDataToSend.append('cover', formData.cover);\n      }\n      await axios.put(`http://localhost:3001/blogs/${id}`, formDataToSend, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setError('');\n      navigate(`/blogs/${id}`);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Errore durante l\\'aggiornamento:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Errore durante l\\'aggiornamento del blog');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    if (e.target.name === 'cover') {\n      setFormData({\n        ...formData,\n        cover: e.target.files[0]\n      });\n    } else if (e.target.name.startsWith('readTime.')) {\n      const field = e.target.name.split('.')[1];\n      setFormData({\n        ...formData,\n        readTime: {\n          ...formData.readTime,\n          [field]: field === 'value' ? parseInt(e.target.value) : e.target.value\n        }\n      });\n    } else {\n      setFormData({\n        ...formData,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  // Correzione degli operatori logici con parentesi per chiarire l'ordine di esecuzione\n  if (error && error.includes(\"Non sei autorizzato\") || error && error.includes(\"Devi essere loggato\")) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Sarai reindirizzato a breve...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Modifica Blog\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Caricamento...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2\",\n        children: \"Caricamento in corso...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Titolo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          name: \"title\",\n          value: formData.title,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Contenuto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          as: \"textarea\",\n          rows: 10,\n          name: \"content\",\n          value: formData.content,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Categoria\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          name: \"category\",\n          value: formData.category,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Tempo di Lettura\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"number\",\n            name: \"readTime.value\",\n            value: formData.readTime.value,\n            onChange: handleChange,\n            required: true,\n            min: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n            name: \"readTime.unit\",\n            value: formData.readTime.unit,\n            onChange: handleChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"minuti\",\n              children: \"Minuti\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ore\",\n              children: \"Ore\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Immagine di Copertina\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"file\",\n          name: \"cover\",\n          onChange: handleChange,\n          accept: \"image/*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n          className: \"text-muted\",\n          children: \"Lascia vuoto per mantenere l'immagine corrente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          disabled: loading,\n          children: loading ? 'Aggiornamento...' : 'Aggiorna Blog'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => navigate(`/blogs/${id}`),\n          children: \"Annulla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n};\n_s(EditBlog, \"LDl/yPxbaio4sPAy0RW90V5iuW4=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = EditBlog;\nexport default EditBlog;\nvar _c;\n$RefreshReg$(_c, \"EditBlog\");","map":{"version":3,"names":["useState","useEffect","useCallback","Form","Button","Container","Alert","Spinner","useNavigate","useParams","useAuth","axios","jsxDEV","_jsxDEV","EditBlog","_s","id","user","formData","setFormData","title","content","category","readTime","value","unit","cover","author","loading","setLoading","error","setError","navigate","fetchBlog","_blog$author","response","get","blog","data","_id","setTimeout","err","_err$response","_err$response$data","console","message","handleSubmit","e","preventDefault","formDataToSend","FormData","append","JSON","stringify","put","headers","_err$response2","_err$response2$data","handleChange","target","name","files","startsWith","field","split","parseInt","includes","className","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","animation","role","onSubmit","Group","Label","Control","type","onChange","required","as","rows","min","Select","accept","Text","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/Users/esis/Downloads/M6W3D4/frontend/src/pages/EditBlog.jsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport { Form, Button, Container, Alert, Spinner } from 'react-bootstrap';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios';\r\n\r\nconst EditBlog = () => {\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    content: '',\r\n    category: '',\r\n    readTime: {\r\n      value: 0,\r\n      unit: 'minuti'\r\n    },\r\n    cover: null,\r\n    author: ''\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const fetchBlog = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`http://localhost:3001/blogs/${id}`);\r\n      const blog = response.data;\r\n      \r\n      // Verifica se l'utente è l'autore del blog\r\n      if (user && blog.author && user._id !== blog.author._id) {\r\n        setError(\"Non sei autorizzato a modificare questo blog\");\r\n        setTimeout(() => navigate('/my-blogs'), 2000); // Reindirizza dopo 2 secondi\r\n        return;\r\n      }\r\n      \r\n      setFormData({\r\n        title: blog.title || '',\r\n        content: blog.content || '',\r\n        category: blog.category || '',\r\n        readTime: blog.readTime || { value: 1, unit: 'minuti' },\r\n        cover: null,\r\n        author: blog.author?._id || user?._id || ''\r\n      });\r\n    } catch (err) {\r\n      console.error('Errore nel caricamento del blog:', err);\r\n      setError(`Errore nel caricamento del blog: ${err.response?.data?.message || err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id, user, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchBlog();\r\n    } else {\r\n      setError(\"Devi essere loggato per modificare un blog\");\r\n      setTimeout(() => navigate('/login'), 2000);\r\n    }\r\n  }, [fetchBlog, user, navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(true);\r\n      const formDataToSend = new FormData();\r\n      formDataToSend.append('title', formData.title);\r\n      formDataToSend.append('content', formData.content);\r\n      formDataToSend.append('category', formData.category);\r\n      formDataToSend.append('readTime', JSON.stringify(formData.readTime));\r\n      \r\n      if (formData.author) {\r\n        formDataToSend.append('author', formData.author);\r\n      }\r\n      \r\n      if (formData.cover) {\r\n        formDataToSend.append('cover', formData.cover);\r\n      }\r\n\r\n      await axios.put(`http://localhost:3001/blogs/${id}`, formDataToSend, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      \r\n      setError('');\r\n      navigate(`/blogs/${id}`);\r\n    } catch (err) {\r\n      console.error('Errore durante l\\'aggiornamento:', err);\r\n      setError(err.response?.data?.message || 'Errore durante l\\'aggiornamento del blog');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.name === 'cover') {\r\n      setFormData({ ...formData, cover: e.target.files[0] });\r\n    } else if (e.target.name.startsWith('readTime.')) {\r\n      const field = e.target.name.split('.')[1];\r\n      setFormData({\r\n        ...formData,\r\n        readTime: { \r\n          ...formData.readTime, \r\n          [field]: field === 'value' ? parseInt(e.target.value) : e.target.value \r\n        }\r\n      });\r\n    } else {\r\n      setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  // Correzione degli operatori logici con parentesi per chiarire l'ordine di esecuzione\r\n  if ((error && error.includes(\"Non sei autorizzato\")) || (error && error.includes(\"Devi essere loggato\"))) {\r\n    return (\r\n      <Container className=\"mt-4\">\r\n        <Alert variant=\"danger\">{error}</Alert>\r\n        <p>Sarai reindirizzato a breve...</p>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container className=\"mt-4\">\r\n      <h2>Modifica Blog</h2>\r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n      \r\n      {loading ? (\r\n        <div className=\"text-center my-5\">\r\n          <Spinner animation=\"border\" role=\"status\">\r\n            <span className=\"visually-hidden\">Caricamento...</span>\r\n          </Spinner>\r\n          <p className=\"mt-2\">Caricamento in corso...</p>\r\n        </div>\r\n      ) : (\r\n        <Form onSubmit={handleSubmit}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Titolo</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              name=\"title\"\r\n              value={formData.title}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          \r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Contenuto</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={10}\r\n              name=\"content\"\r\n              value={formData.content}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          \r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Categoria</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              name=\"category\"\r\n              value={formData.category}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          \r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Tempo di Lettura</Form.Label>\r\n            <div className=\"d-flex gap-2\">\r\n              <Form.Control\r\n                type=\"number\"\r\n                name=\"readTime.value\"\r\n                value={formData.readTime.value}\r\n                onChange={handleChange}\r\n                required\r\n                min=\"1\"\r\n              />\r\n              <Form.Select\r\n                name=\"readTime.unit\"\r\n                value={formData.readTime.unit}\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option value=\"minuti\">Minuti</option>\r\n                <option value=\"ore\">Ore</option>\r\n              </Form.Select>\r\n            </div>\r\n          </Form.Group>\r\n          \r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>Immagine di Copertina</Form.Label>\r\n            <Form.Control\r\n              type=\"file\"\r\n              name=\"cover\"\r\n              onChange={handleChange}\r\n              accept=\"image/*\"\r\n            />\r\n            <Form.Text className=\"text-muted\">\r\n              Lascia vuoto per mantenere l'immagine corrente\r\n            </Form.Text>\r\n          </Form.Group>\r\n          \r\n          <div className=\"d-flex gap-2\">\r\n            <Button variant=\"primary\" type=\"submit\" disabled={loading}>\r\n              {loading ? 'Aggiornamento...' : 'Aggiorna Blog'}\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={() => navigate(`/blogs/${id}`)}>\r\n              Annulla\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default EditBlog;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,IAAI,EAAEC,MAAM,EAAEC,SAAS,EAAEC,KAAK,EAAEC,OAAO,QAAQ,iBAAiB;AACzE,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACzD,SAASC,OAAO,QAAQ,yBAAyB;AACjD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM;IAAEC;EAAG,CAAC,GAAGP,SAAS,CAAC,CAAC;EAC1B,MAAM;IAAEQ;EAAK,CAAC,GAAGP,OAAO,CAAC,CAAC;EAC1B,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC;IACvCoB,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,EAAE;IACXC,QAAQ,EAAE,EAAE;IACZC,QAAQ,EAAE;MACRC,KAAK,EAAE,CAAC;MACRC,IAAI,EAAE;IACR,CAAC;IACDC,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC8B,KAAK,EAAEC,QAAQ,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAMgC,QAAQ,GAAGxB,WAAW,CAAC,CAAC;EAE9B,MAAMyB,SAAS,GAAG/B,WAAW,CAAC,YAAY;IACxC,IAAI;MAAA,IAAAgC,YAAA;MACFL,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMM,QAAQ,GAAG,MAAMxB,KAAK,CAACyB,GAAG,CAAC,+BAA+BpB,EAAE,EAAE,CAAC;MACrE,MAAMqB,IAAI,GAAGF,QAAQ,CAACG,IAAI;;MAE1B;MACA,IAAIrB,IAAI,IAAIoB,IAAI,CAACV,MAAM,IAAIV,IAAI,CAACsB,GAAG,KAAKF,IAAI,CAACV,MAAM,CAACY,GAAG,EAAE;QACvDR,QAAQ,CAAC,8CAA8C,CAAC;QACxDS,UAAU,CAAC,MAAMR,QAAQ,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QAC/C;MACF;MAEAb,WAAW,CAAC;QACVC,KAAK,EAAEiB,IAAI,CAACjB,KAAK,IAAI,EAAE;QACvBC,OAAO,EAAEgB,IAAI,CAAChB,OAAO,IAAI,EAAE;QAC3BC,QAAQ,EAAEe,IAAI,CAACf,QAAQ,IAAI,EAAE;QAC7BC,QAAQ,EAAEc,IAAI,CAACd,QAAQ,IAAI;UAAEC,KAAK,EAAE,CAAC;UAAEC,IAAI,EAAE;QAAS,CAAC;QACvDC,KAAK,EAAE,IAAI;QACXC,MAAM,EAAE,EAAAO,YAAA,GAAAG,IAAI,CAACV,MAAM,cAAAO,YAAA,uBAAXA,YAAA,CAAaK,GAAG,MAAItB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsB,GAAG,KAAI;MAC3C,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOE,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACZC,OAAO,CAACd,KAAK,CAAC,kCAAkC,EAAEW,GAAG,CAAC;MACtDV,QAAQ,CAAC,oCAAoC,EAAAW,aAAA,GAAAD,GAAG,CAACN,QAAQ,cAAAO,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcJ,IAAI,cAAAK,kBAAA,uBAAlBA,kBAAA,CAAoBE,OAAO,KAAIJ,GAAG,CAACI,OAAO,EAAE,CAAC;IAC5F,CAAC,SAAS;MACRhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACb,EAAE,EAAEC,IAAI,EAAEe,QAAQ,CAAC,CAAC;EAExB/B,SAAS,CAAC,MAAM;IACd,IAAIgB,IAAI,EAAE;MACRgB,SAAS,CAAC,CAAC;IACb,CAAC,MAAM;MACLF,QAAQ,CAAC,4CAA4C,CAAC;MACtDS,UAAU,CAAC,MAAMR,QAAQ,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC;IAC5C;EACF,CAAC,EAAE,CAACC,SAAS,EAAEhB,IAAI,EAAEe,QAAQ,CAAC,CAAC;EAE/B,MAAMc,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI;MACFnB,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMoB,cAAc,GAAG,IAAIC,QAAQ,CAAC,CAAC;MACrCD,cAAc,CAACE,MAAM,CAAC,OAAO,EAAEjC,QAAQ,CAACE,KAAK,CAAC;MAC9C6B,cAAc,CAACE,MAAM,CAAC,SAAS,EAAEjC,QAAQ,CAACG,OAAO,CAAC;MAClD4B,cAAc,CAACE,MAAM,CAAC,UAAU,EAAEjC,QAAQ,CAACI,QAAQ,CAAC;MACpD2B,cAAc,CAACE,MAAM,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACnC,QAAQ,CAACK,QAAQ,CAAC,CAAC;MAEpE,IAAIL,QAAQ,CAACS,MAAM,EAAE;QACnBsB,cAAc,CAACE,MAAM,CAAC,QAAQ,EAAEjC,QAAQ,CAACS,MAAM,CAAC;MAClD;MAEA,IAAIT,QAAQ,CAACQ,KAAK,EAAE;QAClBuB,cAAc,CAACE,MAAM,CAAC,OAAO,EAAEjC,QAAQ,CAACQ,KAAK,CAAC;MAChD;MAEA,MAAMf,KAAK,CAAC2C,GAAG,CAAC,+BAA+BtC,EAAE,EAAE,EAAEiC,cAAc,EAAE;QACnEM,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MAEFxB,QAAQ,CAAC,EAAE,CAAC;MACZC,QAAQ,CAAC,UAAUhB,EAAE,EAAE,CAAC;IAC1B,CAAC,CAAC,OAAOyB,GAAG,EAAE;MAAA,IAAAe,cAAA,EAAAC,mBAAA;MACZb,OAAO,CAACd,KAAK,CAAC,kCAAkC,EAAEW,GAAG,CAAC;MACtDV,QAAQ,CAAC,EAAAyB,cAAA,GAAAf,GAAG,CAACN,QAAQ,cAAAqB,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAclB,IAAI,cAAAmB,mBAAA,uBAAlBA,mBAAA,CAAoBZ,OAAO,KAAI,0CAA0C,CAAC;IACrF,CAAC,SAAS;MACRhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM6B,YAAY,GAAIX,CAAC,IAAK;IAC1B,IAAIA,CAAC,CAACY,MAAM,CAACC,IAAI,KAAK,OAAO,EAAE;MAC7BzC,WAAW,CAAC;QAAE,GAAGD,QAAQ;QAAEQ,KAAK,EAAEqB,CAAC,CAACY,MAAM,CAACE,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC;IACxD,CAAC,MAAM,IAAId,CAAC,CAACY,MAAM,CAACC,IAAI,CAACE,UAAU,CAAC,WAAW,CAAC,EAAE;MAChD,MAAMC,KAAK,GAAGhB,CAAC,CAACY,MAAM,CAACC,IAAI,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACzC7C,WAAW,CAAC;QACV,GAAGD,QAAQ;QACXK,QAAQ,EAAE;UACR,GAAGL,QAAQ,CAACK,QAAQ;UACpB,CAACwC,KAAK,GAAGA,KAAK,KAAK,OAAO,GAAGE,QAAQ,CAAClB,CAAC,CAACY,MAAM,CAACnC,KAAK,CAAC,GAAGuB,CAAC,CAACY,MAAM,CAACnC;QACnE;MACF,CAAC,CAAC;IACJ,CAAC,MAAM;MACLL,WAAW,CAAC;QAAE,GAAGD,QAAQ;QAAE,CAAC6B,CAAC,CAACY,MAAM,CAACC,IAAI,GAAGb,CAAC,CAACY,MAAM,CAACnC;MAAM,CAAC,CAAC;IAC/D;EACF,CAAC;;EAED;EACA,IAAKM,KAAK,IAAIA,KAAK,CAACoC,QAAQ,CAAC,qBAAqB,CAAC,IAAMpC,KAAK,IAAIA,KAAK,CAACoC,QAAQ,CAAC,qBAAqB,CAAE,EAAE;IACxG,oBACErD,OAAA,CAACR,SAAS;MAAC8D,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACzBvD,OAAA,CAACP,KAAK;QAAC+D,OAAO,EAAC,QAAQ;QAAAD,QAAA,EAAEtC;MAAK;QAAAwC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACvC5D,OAAA;QAAAuD,QAAA,EAAG;MAA8B;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CAAC;EAEhB;EAEA,oBACE5D,OAAA,CAACR,SAAS;IAAC8D,SAAS,EAAC,MAAM;IAAAC,QAAA,gBACzBvD,OAAA;MAAAuD,QAAA,EAAI;IAAa;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACrB3C,KAAK,iBAAIjB,OAAA,CAACP,KAAK;MAAC+D,OAAO,EAAC,QAAQ;MAAAD,QAAA,EAAEtC;IAAK;MAAAwC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAEhD7C,OAAO,gBACNf,OAAA;MAAKsD,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/BvD,OAAA,CAACN,OAAO;QAACmE,SAAS,EAAC,QAAQ;QAACC,IAAI,EAAC,QAAQ;QAAAP,QAAA,eACvCvD,OAAA;UAAMsD,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAAc;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChD,CAAC,eACV5D,OAAA;QAAGsD,SAAS,EAAC,MAAM;QAAAC,QAAA,EAAC;MAAuB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CAAC,gBAEN5D,OAAA,CAACV,IAAI;MAACyE,QAAQ,EAAE9B,YAAa;MAAAsB,QAAA,gBAC3BvD,OAAA,CAACV,IAAI,CAAC0E,KAAK;QAACV,SAAS,EAAC,MAAM;QAAAC,QAAA,gBAC1BvD,OAAA,CAACV,IAAI,CAAC2E,KAAK;UAAAV,QAAA,EAAC;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAC/B5D,OAAA,CAACV,IAAI,CAAC4E,OAAO;UACXC,IAAI,EAAC,MAAM;UACXpB,IAAI,EAAC,OAAO;UACZpC,KAAK,EAAEN,QAAQ,CAACE,KAAM;UACtB6D,QAAQ,EAAEvB,YAAa;UACvBwB,QAAQ;QAAA;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ,CAAC,eAEb5D,OAAA,CAACV,IAAI,CAAC0E,KAAK;QAACV,SAAS,EAAC,MAAM;QAAAC,QAAA,gBAC1BvD,OAAA,CAACV,IAAI,CAAC2E,KAAK;UAAAV,QAAA,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAClC5D,OAAA,CAACV,IAAI,CAAC4E,OAAO;UACXI,EAAE,EAAC,UAAU;UACbC,IAAI,EAAE,EAAG;UACTxB,IAAI,EAAC,SAAS;UACdpC,KAAK,EAAEN,QAAQ,CAACG,OAAQ;UACxB4D,QAAQ,EAAEvB,YAAa;UACvBwB,QAAQ;QAAA;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ,CAAC,eAEb5D,OAAA,CAACV,IAAI,CAAC0E,KAAK;QAACV,SAAS,EAAC,MAAM;QAAAC,QAAA,gBAC1BvD,OAAA,CAACV,IAAI,CAAC2E,KAAK;UAAAV,QAAA,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAClC5D,OAAA,CAACV,IAAI,CAAC4E,OAAO;UACXC,IAAI,EAAC,MAAM;UACXpB,IAAI,EAAC,UAAU;UACfpC,KAAK,EAAEN,QAAQ,CAACI,QAAS;UACzB2D,QAAQ,EAAEvB,YAAa;UACvBwB,QAAQ;QAAA;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACQ,CAAC,eAEb5D,OAAA,CAACV,IAAI,CAAC0E,KAAK;QAACV,SAAS,EAAC,MAAM;QAAAC,QAAA,gBAC1BvD,OAAA,CAACV,IAAI,CAAC2E,KAAK;UAAAV,QAAA,EAAC;QAAgB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACzC5D,OAAA;UAAKsD,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BvD,OAAA,CAACV,IAAI,CAAC4E,OAAO;YACXC,IAAI,EAAC,QAAQ;YACbpB,IAAI,EAAC,gBAAgB;YACrBpC,KAAK,EAAEN,QAAQ,CAACK,QAAQ,CAACC,KAAM;YAC/ByD,QAAQ,EAAEvB,YAAa;YACvBwB,QAAQ;YACRG,GAAG,EAAC;UAAG;YAAAf,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC,eACF5D,OAAA,CAACV,IAAI,CAACmF,MAAM;YACV1B,IAAI,EAAC,eAAe;YACpBpC,KAAK,EAAEN,QAAQ,CAACK,QAAQ,CAACE,IAAK;YAC9BwD,QAAQ,EAAEvB,YAAa;YACvBwB,QAAQ;YAAAd,QAAA,gBAERvD,OAAA;cAAQW,KAAK,EAAC,QAAQ;cAAA4C,QAAA,EAAC;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACtC5D,OAAA;cAAQW,KAAK,EAAC,KAAK;cAAA4C,QAAA,EAAC;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAEb5D,OAAA,CAACV,IAAI,CAAC0E,KAAK;QAACV,SAAS,EAAC,MAAM;QAAAC,QAAA,gBAC1BvD,OAAA,CAACV,IAAI,CAAC2E,KAAK;UAAAV,QAAA,EAAC;QAAqB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAC9C5D,OAAA,CAACV,IAAI,CAAC4E,OAAO;UACXC,IAAI,EAAC,MAAM;UACXpB,IAAI,EAAC,OAAO;UACZqB,QAAQ,EAAEvB,YAAa;UACvB6B,MAAM,EAAC;QAAS;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eACF5D,OAAA,CAACV,IAAI,CAACqF,IAAI;UAACrB,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAElC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAW,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEb5D,OAAA;QAAKsD,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BvD,OAAA,CAACT,MAAM;UAACiE,OAAO,EAAC,SAAS;UAACW,IAAI,EAAC,QAAQ;UAACS,QAAQ,EAAE7D,OAAQ;UAAAwC,QAAA,EACvDxC,OAAO,GAAG,kBAAkB,GAAG;QAAe;UAAA0C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC,eACT5D,OAAA,CAACT,MAAM;UAACiE,OAAO,EAAC,WAAW;UAACqB,OAAO,EAAEA,CAAA,KAAM1D,QAAQ,CAAC,UAAUhB,EAAE,EAAE,CAAE;UAAAoD,QAAA,EAAC;QAErE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACP;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACQ,CAAC;AAEhB,CAAC;AAAC1D,EAAA,CArNID,QAAQ;EAAA,QACGL,SAAS,EACPC,OAAO,EAcPF,WAAW;AAAA;AAAAmF,EAAA,GAhBxB7E,QAAQ;AAuNd,eAAeA,QAAQ;AAAC,IAAA6E,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}